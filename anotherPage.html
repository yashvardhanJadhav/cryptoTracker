<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://unpkg.com/flowbite@1.3.4/dist/flowbite.min.css" />
</head>
<style>
    @media only screen and (max-width: 600px) {
        .headingToChange {
            justify-content: center;
            margin-top: 8px;
            margin-bottom: 8px;
           
        }

        .headingSizeTochange {
            font-size:40px;
            vertical-align: middle;
        }
        .imageToChange{
            width: 40px;
            margin-right: 10px;
        }

       #wholePadding{
        padding-left: 8px; padding-right: 8px;
       }
    }
    .headingToChangeCard{
            text-align: center;
        }
</style>

<body class="bg-gray-200 dark:bg-gray-900">

    <nav class="bg-white border-gray-200 px-2 sm:px-4 py-2.5  dark:bg-gray-800">
        <div class="container flex flex-wrap justify-between items-center mx-auto">
            <a href="http://localhost:3000/" class="flex items-center">
                <img class="mr-3 h-10" src="mainLogo.png"></img>
                <span class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">CryptoTracker</span>
            </a>
            <div class="flex items-center md:order-2">


                <button id="theme-toggle" type="button"
                    class="text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5">
                    <svg id="theme-toggle-dark-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20"
                        xmlns="http://www.w3.org/2000/svg">
                        <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path>
                    </svg>
                    <svg id="theme-toggle-light-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20"
                        xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"
                            fill-rule="evenodd" clip-rule="evenodd"></path>
                    </svg>
                </button>

            </div>
            <div class="hidden justify-between items-center w-full md:flex md:w-auto md:order-1" id="mobile-menu-2">

            </div>
        </div>
    </nav>

    <div class="container mx-auto" id="wholePadding">
        <div id="section1">
        </div>
    </div>


    <footer class="p-4 bg-white shadow md:px-6 md:py-8 dark:bg-gray-800" style="
                    padding: 10px 10px 0px 10px;
                    bottom: 0;
                    width: 100%;
                    height: 200px;
                ">
        <div class="container mx-auto sm:flex sm:items-center sm:justify-between">
            <a href="http://localhost:3000/" class="flex items-center mb-4 sm:mb-0">
                <img class="mr-3 h-10" src="mainLogo.png"></img>
                <span class="self-center text-2xl font-semibold whitespace-nowrap dark:text-white">CryptoTracker</span>
            </a>
            <ul class="flex flex-wrap items-center mb-6 text-sm text-gray-500 sm:mb-0 dark:text-gray-400">
                <li>
                    <a href="http://localhost:3000/" class="mr-4 hover:underline md:mr-6 ">Home</a>
                </li>

            </ul>
        </div>
        <hr class="my-6 border-gray-200 sm:mx-auto dark:border-gray-700 lg:my-8">
        <span class="block text-sm text-gray-500 sm:text-center dark:text-gray-400">© 2022 <a
                href="http://localhost:3000/" class="hover:underline">CryptoTracker™</a>. All Rights Reserved.
        </span>
    </footer>



    <script src="https://unpkg.com/flowbite@1.3.4/dist/flowbite.js"></script>
    <script src="https://widgets.coingecko.com/coingecko-coin-converter-widget.js"></script>

    <script src="https://widgets.coingecko.com/coingecko-coin-compare-chart-widget.js"></script>
</body>
<script>
    function separator(numb) {
        var str = numb.toString().split(".");
        str[0] = str[0].replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        return str.join(".");
    }
    let idOfCoin = localStorage.getItem('id');
    console.log(idOfCoin);
    const getTopTrending = async (idOfCoin) => {
        const response = await fetch(`https://api.coingecko.com/api/v3/coins/${idOfCoin}`);
        const data = await response.json();
        console.log(data);
        let section1 = document.getElementById('section1');
        let html = ` <div class="flex flex-col md:flex-row pb-4 overflow-x-auto">
                    <div class="flex container mx-auto justify-left my-4 headingToChange">
                        <img src="${data.image.large}" class="imageToChange" style="width:80px; margin-right: 15px;"
                            alt='${data.name}' />
                        <p class='my-4 text-5xl font-bold text-left dark:text-white text-gray-800 headingSizeTochange'>${data.name}</p>
                    </div>
                    <div class="flex container mx-auto justify-end my-4 headingToChange">

                        <p class='my-4 text-5xl font-bold text-left dark:text-white text-gray-800 headingSizeTochange'>$${separator(data.market_data.current_price.usd.toFixed(4))}</p>
                    </div>
                </div>
                <div class="flex flex-col md:flex-row pb-4 overflow-x-auto">

                    <div href="/"
                        class="block p-6 w-full bg-white rounded-lg border-t-4 border-blue-700 shadow-md hover:bg-gray-100 dark:bg-gray-800 dark:border-blue-700 dark:hover:bg-gray-700 mr-2">
                        <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white headingToChangeCard">
                            $${separator(data.market_data.market_cap.usd)}
                        </h5>
                        <p class="font-semibold text-gray-700 dark:text-gray-400 headingToChangeCard">Market Capitalization</p>
                    </div>

                    <div href="/"
                        class="block p-6 w-full bg-white rounded-lg border-t-4 border-blue-700 shadow-md hover:bg-gray-100 dark:bg-gray-800 dark:border-blue-700 dark:hover:bg-gray-700 mr-2">
                        <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white headingToChangeCard">
                            $${separator(data.market_data.total_volume.usd)}</h5>
                        <p class="font-semibold text-gray-700 dark:text-gray-400 headingToChangeCard">24h Trading Volume</p>
                    </div>
                    <div href="/"
                        class="block p-6 w-full bg-white rounded-lg border-t-4 border-blue-700 shadow-md hover:bg-gray-100 dark:bg-gray-800 dark:border-blue-700 dark:hover:bg-gray-700 mr-2">
                        <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white headingToChangeCard">
                            ${separator(data.market_data.circulating_supply)}</h5>
                        <p class="font-semibold text-gray-700 dark:text-gray-400 headingToChangeCard">Circulatiing Supply</p>
                    </div>


                    <div href="/"
                        class="block p-6 w-full bg-white rounded-lg border-t-4 border-blue-700 shadow-md hover:bg-gray-100 dark:bg-gray-800 dark:border-blue-700 dark:hover:bg-gray-700">
                        <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white headingToChangeCard">${separator(data.market_data.price_change_24h)}
                        </h5>
                        <p class="font-semibold text-gray-700 dark:text-gray-400 headingToChangeCard">Price Change 24h</p>
                    </div>

                </div>

                <div style="align-items:center;">
                   

                </div>
                <div class="flex flex-col">
                    <div class="overflow-x-auto sm:-mx-6 lg:-mx-8">
                        <div class="inline-block py-2 min-w-full sm:px-6 lg:px-8">
                            <div class="overflow-hidden shadow-md sm:rounded-lg">
                                <table class="min-w-full">
                                    
                                    <tbody>

                                        <tr
                                            class="border-b odd:bg-white even:bg-gray-50 odd:dark:bg-gray-800 even:dark:bg-gray-700 dark:border-gray-600">
                                            <td
                                                class="py-2 px-6 text-xl font-semibold text-gray-900 whitespace-nowrap dark:text-white">
                                                Popularity
                                            </td>
                                            <td
                                                class="py-2 px-6 text-xl font-semibold text-gray-500 whitespace-nowrap dark:text-gray-400">
                                                #${separator(data.market_cap_rank)}
                                            </td>

                                        </tr>

                                        <tr
                                            class="border-b odd:bg-white even:bg-gray-50 odd:dark:bg-gray-800 even:dark:bg-gray-700 dark:border-gray-600">
                                            <td
                                                class="py-2 px-6 text-xl font-semibold text-gray-900 whitespace-nowrap dark:text-white">
                                                Price change (1h)
                                            </td>
                                            <td
                                                class="py-2 px-6 text-xl font-semibold text-gray-500 whitespace-nowrap dark:text-gray-400">
                                                $${data.market_data.price_change_percentage_1h_in_currency.usd}
                                            </td>

                                        </tr>

                                        <tr
                                            class="border-b odd:bg-white even:bg-gray-50 odd:dark:bg-gray-800 even:dark:bg-gray-700 dark:border-gray-600">
                                            <td
                                                class="py-2 px-6 text-xl font-semibold text-gray-900 whitespace-nowrap dark:text-white">
                                                Price change (24h)
                                            </td>
                                            <td
                                                class="py-2 px-6 text-xl font-semibold text-gray-500 whitespace-nowrap dark:text-gray-400">
                                                $${data.market_data.price_change_percentage_24h_in_currency.usd}
                                            </td>

                                        </tr>

                                        <tr
                                            class="border-b odd:bg-white even:bg-gray-50 odd:dark:bg-gray-800 even:dark:bg-gray-700 dark:border-gray-600">
                                            <td
                                                class="py-2 px-6 text-xl font-semibold text-gray-900 whitespace-nowrap dark:text-white">
                                                Price change (7d)
                                            </td>
                                            <td
                                                class="py-2 px-6 text-xl font-semibold text-gray-500 whitespace-nowrap dark:text-gray-400">
                                                $${data.market_data.price_change_percentage_7d_in_currency.usd?data.market_data.price_change_percentage_7d_in_currency.usd:" -"}
                                            </td>

                                        </tr>

                                        <tr
                                            class="border-b odd:bg-white even:bg-gray-50 odd:dark:bg-gray-800 even:dark:bg-gray-700 dark:border-gray-600">
                                            <td
                                                class="py-2 px-6 text-xl font-semibold text-gray-900 whitespace-nowrap dark:text-white">
                                                Price change (14d)
                                            </td>
                                            <td
                                                class="py-2 px-6 text-xl font-semibold text-gray-500 whitespace-nowrap dark:text-gray-400">
                                                $${data.market_data.price_change_percentage_14d_in_currency.usd?data.market_data.price_change_percentage_14d_in_currency.usd:" -"}
                                            </td>

                                        </tr>
                                        <tr
                                            class="border-b odd:bg-white even:bg-gray-50 odd:dark:bg-gray-800 even:dark:bg-gray-700 dark:border-gray-600">
                                            <td
                                                class="py-2 px-6 text-xl font-semibold text-gray-900 whitespace-nowrap dark:text-white">
                                                Price change (30d)
                                            </td>
                                            <td
                                                class="py-2 px-6 text-xl font-semibold text-gray-500 whitespace-nowrap dark:text-gray-400">
                                                $${data.market_data.price_change_percentage_30d_in_currency.usd?data.market_data.price_change_percentage_30d_in_currency.usd:" -"}
                                            </td>

                                        </tr>
                                        <tr
                                            class="border-b odd:bg-white even:bg-gray-50 odd:dark:bg-gray-800 even:dark:bg-gray-700 dark:border-gray-600">
                                            <td
                                                class="py-2 px-6 text-xl font-semibold text-gray-900 whitespace-nowrap dark:text-white">
                                                Price change (60d)
                                            </td>
                                            <td
                                                class="py-2 px-6 text-xl font-semibold text-gray-500 whitespace-nowrap dark:text-gray-400">
                                                $${data.market_data.price_change_percentage_60d_in_currency.usd?data.market_data.price_change_percentage_60d_in_currency.usd:" -"}
                                            </td>

                                        </tr>
                                        <tr
                                            class="border-b odd:bg-white even:bg-gray-50 odd:dark:bg-gray-800 even:dark:bg-gray-700 dark:border-gray-600">
                                            <td
                                                class="py-2 px-6 text-xl font-semibold text-gray-900 whitespace-nowrap dark:text-white">
                                                Price change (200d)
                                            </td>
                                            <td
                                                class="py-2 px-6 text-xl font-semibold text-gray-500 whitespace-nowrap dark:text-gray-400">
                                                $${data.market_data.price_change_percentage_200d_in_currency.usd?data.market_data.price_change_percentage_200d_in_currency.usd:" -"}
                                            </td>

                                        </tr>
                                        <tr
                                            class="border-b odd:bg-white even:bg-gray-50 odd:dark:bg-gray-800 even:dark:bg-gray-700 dark:border-gray-600">
                                            <td
                                                class="py-2 px-6 text-xl font-semibold text-gray-900 whitespace-nowrap dark:text-white">
                                                Price change (1y)
                                            </td>
                                            <td
                                                class="py-2 px-6 text-xl font-semibold text-gray-500 whitespace-nowrap dark:text-gray-400">
                                                $${data.market_data.price_change_percentage_1y_in_currency.usd?data.market_data.price_change_percentage_1y_in_currency.usd:" -"}
                                            </td>

                                        </tr>
                                        <tr
                                            class="border-b odd:bg-white even:bg-gray-50 odd:dark:bg-gray-800 even:dark:bg-gray-700 dark:border-gray-600">
                                            <td
                                                class="py-2 px-6 text-xl font-semibold text-gray-900 whitespace-nowrap dark:text-white">
                                                High 24h
                                            </td>
                                            <td
                                                class="py-2 px-6 text-xl font-semibold text-gray-500 whitespace-nowrap dark:text-gray-400">
                                                $${separator(data.market_data.high_24h.usd)}
                                            </td>

                                        </tr>
                                        <tr
                                            class="border-b odd:bg-white even:bg-gray-50 odd:dark:bg-gray-800 even:dark:bg-gray-700 dark:border-gray-600">
                                            <td
                                                class="py-2 px-6 text-xl font-semibold text-gray-900 whitespace-nowrap dark:text-white">
                                                Low 24h
                                            </td>
                                            <td
                                                class="py-2 px-6 text-xl font-semibold text-gray-500 whitespace-nowrap dark:text-gray-400">
                                                $${separator(data.market_data.low_24h.usd)}
                                            </td>

                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

<div class="my-3">
    <coingecko-coin-compare-chart-widget coin-ids="${data.id}" currency="usd" locale="en">
    </coingecko-coin-compare-chart-widget>
</div>
<div class="my-3"><coingecko-coin-converter-widget coin-id="${data.id}" currency="usd" background-color="#1f2937" font-color="#ffffff"
    locale="en"></coingecko-coin-converter-widget></div>
<div class="my-4 p-6 bg-white rounded-lg border border-gray-200 shadow-md dark:bg-gray-800 dark:border-gray-700">
    <a href="#">
        <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">Description</h5>
    </a>
    <p class="mb-3 font-normal text-gray-700 dark:text-gray-400">${data.description.en}</p>

</div>`;
        section1.innerHTML = html;
    }
    getTopTrending(idOfCoin);
    if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) &&
        window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('dark');
    } else {
        document.documentElement.classList.remove('dark')
    }
    var themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon');
    var themeToggleLightIcon = document.getElementById('theme-toggle-light-icon');

    // Change the icons inside the button based on previous settings
    if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) &&
        window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        themeToggleLightIcon.classList.remove('hidden');
    } else {
        themeToggleDarkIcon.classList.remove('hidden');
    }

    var themeToggleBtn = document.getElementById('theme-toggle');

    themeToggleBtn.addEventListener('click', function () {

        // toggle icons inside button
        themeToggleDarkIcon.classList.toggle('hidden');
        themeToggleLightIcon.classList.toggle('hidden');

        // if set via local storage previously
        if (localStorage.getItem('color-theme')) {
            if (localStorage.getItem('color-theme') === 'light') {
                document.documentElement.classList.add('dark');
                localStorage.setItem('color-theme', 'dark');
            } else {
                document.documentElement.classList.remove('dark');
                localStorage.setItem('color-theme', 'light');
            }

            // if NOT set via local storage previously
        } else {
            if (document.documentElement.classList.contains('dark')) {
                document.documentElement.classList.remove('dark');
                localStorage.setItem('color-theme', 'light');
            } else {
                document.documentElement.classList.add('dark');
                localStorage.setItem('color-theme', 'dark');
            }
        }

    });
</script>

</html>